<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Advanced Notepad with Tabs</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" />
  <style>
    .floating-buttons {
      position: fixed;
      top: 2rem;
      right: 2rem;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-800 min-h-screen flex items-center justify-center p-4" id="main_body">
  <div class="bg-white shadow-lg rounded-xl w-full max-w-7xl h-[85vh] flex flex-col">
    <!-- Tabs Header -->
    <div id="tabs" class="flex border-b border-gray-200">
      <button id="addTabButton" class="px-4 py-2 text-blue-500 hover:text-blue-600 flex items-center gap-1">
        <i class="fa-solid fa-plus"></i> Add Tab
      </button>
    </div>
    
    <!-- Editor Panels -->
    <div id="tabContents" class="flex-1 overflow-hidden rounded-b-xl">
      <!-- Dynamic content will be injected here -->
    </div>
  </div>

  <!-- Floating Buttons -->
  <div class="floating-buttons">
    <button id="downloadButton" class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg w-full">
      <i class="fa-solid fa-cloud-arrow-down"></i>
    </button>
    <button id="resetButton" class="bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-lg w-full">
      <i class="fa-solid fa-arrows-rotate"></i>
    </button>
  </div>

  <script>
    const tabs = document.getElementById('tabs');
    const tabContents = document.getElementById('tabContents');
    const addTabButton = document.getElementById('addTabButton');
    const resetButton = document.getElementById('resetButton');
    const downloadButton = document.getElementById('downloadButton');
    let currentTabId = null;

    const state = {
      tabs: [],
      contents: {},
      names: {}
    };

    function createTab(id) {
      const tabButton = document.createElement('button');
      tabButton.id = `tab-${id}`;
      tabButton.className = 'px-4 py-2 text-gray-500 hover:text-gray-600 border-b-2 flex items-center';
      tabButton.innerHTML = `
        <span id="tab-name-${id}">${state.names[id] || `Tab ${id}`}</span>
        <span class="ml-2 text-blue-500 cursor-pointer" onclick="renameTab('${id}')"><i class="fa-solid fa-pen"></i></span>
        <span class="ml-2 text-red-500 cursor-pointer" onclick="deleteTab('${id}')"><i class="fa-solid fa-times"></i></span>
      `;
      tabButton.onclick = (e) => {
        if (!e.target.closest('span')?.classList.contains('cursor-pointer')) {
          switchTab(id);
        }
      };
      tabs.appendChild(tabButton);
    }

    function createTabContent(id) {
      const textarea = document.createElement('textarea');
      textarea.id = `content-${id}`;
      textarea.className = 'w-full h-full p-4 border-0 focus:outline-none';
      textarea.placeholder = `Start typing in Tab ${id}...`;
      textarea.style.display = 'none';
      textarea.addEventListener('input', () => {
        state.contents[id] = textarea.value;
        saveState();
      });
      tabContents.appendChild(textarea);
    }

    function switchTab(id) {
      if (currentTabId !== null) {
        document.getElementById(`content-${currentTabId}`).style.display = 'none';
        document.getElementById(`tab-${currentTabId}`).classList.remove('border-blue-500', 'text-blue-500');
      }
      currentTabId = id;
      document.getElementById(`content-${id}`).style.display = 'block';
      document.getElementById(`tab-${id}`).classList.add('border-blue-500', 'text-blue-500');
    }

    function deleteTab(id) {
      if (state.tabs.length === 1) {
        alert('You must have at least one tab open.');
        return;
      }
      const tabButton = document.getElementById(`tab-${id}`);
      const tabContent = document.getElementById(`content-${id}`);
      tabs.removeChild(tabButton);
      tabContents.removeChild(tabContent);
      
      state.tabs = state.tabs.filter(tabId => tabId !== id);
      delete state.contents[id];
      delete state.names[id];
      saveState();

      if (state.tabs.length > 0) {
        switchTab(state.tabs[0]);
      }
    }

    function renameTab(id) {
      const tabNameSpan = document.getElementById(`tab-name-${id}`);
      const currentName = tabNameSpan.textContent;

      const inputField = document.createElement('input');
      inputField.type = 'text';
      inputField.value = currentName;
      inputField.className = 'border p-1 text-gray-700 rounded';
      inputField.onblur = () => saveRenamedTab(id, inputField.value);
      inputField.onkeydown = (e) => {
        if (e.key === 'Enter') {
          saveRenamedTab(id, inputField.value);
        }
      };

      tabNameSpan.replaceWith(inputField);
      inputField.focus();
    }

    function saveRenamedTab(id, newName) {
      const inputField = document.querySelector(`#tab-${id} input`);
      const span = document.createElement('span');
      span.id = `tab-name-${id}`;
      span.textContent = newName || `Tab ${id}`;
      inputField.replaceWith(span);
      state.names[id] = newName || `Tab ${id}`;
      saveState();
    }

    function saveState() {
      localStorage.setItem('notepadState', JSON.stringify(state));
    }

    function loadState() {
      const savedState = JSON.parse(localStorage.getItem('notepadState') || '{}');
      if (savedState.tabs && savedState.tabs.length) {
        Object.assign(state, savedState);
        savedState.tabs.forEach(tabId => {
          createTab(tabId);
          createTabContent(tabId);
          document.getElementById(`content-${tabId}`).value = state.contents[tabId];
        });
        switchTab(state.tabs[0]);
      } else {
        addNewTab();
      }
    }

    function addNewTab() {
      const newId = Date.now().toString();
      state.tabs.push(newId);
      state.contents[newId] = '';
      state.names[newId] = `Tab ${newId}`;
      createTab(newId);
      createTabContent(newId);
      switchTab(newId);
      saveState();
    }

    addTabButton.addEventListener('click', addNewTab);
    resetButton.addEventListener('click', () => {
      if (currentTabId) {
        document.getElementById(`content-${currentTabId}`).value = '';
        state.contents[currentTabId] = '';
        saveState();
      }
    });
    downloadButton.addEventListener('click', () => {
      let allContent = '';
      state.tabs.forEach(tabId => {
        const tabName = state.names[tabId];
        const tabContent = state.contents[tabId];
        allContent += `### ${tabName} ###\n\n${tabContent}\n\n---\n\n`;
      });

      const blob = new Blob([allContent], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'AllTabsContent.txt';
      a.click();
      URL.revokeObjectURL(url);
    });

    window.onload = loadState;
  </script>
  <script>
    document.addEventListener('contextmenu', function(e) {
      e.preventDefault();
    });
  </script>
  <script>
document.addEventListener("keydown", function(event) {
    // Check if Ctrl+U, F12, or Ctrl+Shift+I is pressed
    if (
        (event.ctrlKey && (event.key === 'u' || event.keyCode === 123)) || // Ctrl+U or Ctrl+F12
        event.key === 'F12' // F12 key
    ) {
        event.preventDefault(); // Prevent default action
    }
});
</script>
<!--   <script>
        // Base64 encoded HTML content
        const encodedHTML = "PGRpdiBzdHlsZT0iY29sb3I6IGdyZWVuOyI+SGVsbG8sIFdvcmxkITwvZGl2Pg==";
        
        // Decode the Base64 string
        const decodedHTML = atob(encodedHTML);
        
        // Display the decoded HTML in the output div
        document.getElementById('main_body').innerHTML = decodedHTML;
    </script> -->
</body>
</html>
